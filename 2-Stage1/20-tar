# Stage1: Tar
# Build and install as cmlfs

# if build under root user
export FORCE_UNSAFE_CONFIGURE=1

# Configure source with clang
CC=clang CXX=clang++ \
LD=ld.mold \
./configure \
    --build=x86_64-cmlfs-linux-musl \
    --host=x86_64-cmlfs-linux-musl \
    --prefix=/llvmtools

# Build and install to toolchain
make -j`nproc --all` && make install

unset FORCE_UNSAFE_CONFIGURE
