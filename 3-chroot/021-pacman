# pacman - stage1
# install pacman to the temporary toolchain /llvmtools

CC=clang CXX=clang++ \
LD=ld.mold \
AR=llvm-ar AS=llvm-as \
RANLIB=llvm-ranlib STRIP=llvm-strip \
OBJCOPY=llvm-objcopy OBJDUMP=llvm-objdump \
meson \
    --prefix=/llvmtools \
    --buildtype=plain \
    -Dpkg-ext=".pkg.tar.zst" \
    -Dsrc-ext=".src.tar.zst" \
    -Dsysconfdir="/llvmtools/etc" \
    -Dlocalstatedir="/llvmtools/var" \
    -Ddoc=disabled \
    -Ddoxygen=disabled \
    -Dscriptlet-shell=/llvmtools/bin/bash \
    -Dldconfig=/llvmtools/bin/ldconfig \
    build

meson compile -C build

meson install -C build
