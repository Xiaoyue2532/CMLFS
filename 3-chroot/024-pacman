# pacman - stage1
# install pacman to the temporary toolchain /llvmtools

meson \
    --prefix=/llvmtools \
    --buildtype=plain \
    -Dpkg-ext=".pkg.tar.zst" \
    -Dsrc-ext=".src.tar.zst" \
    -Dsysconfdir="/llvmtools/etc" \
    -Dlocalstatedir="/llvmtools/var" \
    -Ddoc=disabled \
    -Ddoxygen=disabled \
    -Dscriptlet-shell=/llvmtools/bin/bash \
    -Dldconfig=/llvmtools/bin/ldconfig \
    build

meson compile -C build

meson install -C build

# copy all configuration files to /llvmtools
cp -v alpm.sysusers /llvmtools/etc
cp -v makepkg.conf /llvmtools/etc
cp -v pacman.conf /llvmtools/etc
cp -v rust.conf /llvmtools/etc
